/* src/Styles/PracticeQuestionsPage.css */

/* --- Base Styles --- */
.practice-questions-page {
    position: relative;
    min-height: 100vh;
    padding: 2rem 1.5rem 4rem 1.5rem; /* Add bottom padding */
    color: #e0e0e0;
    overflow-x: hidden;
}

.live-background-canvas { /* Remains the same */
    position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1;
    background: linear-gradient(-45deg,#0b021d,#1f0a40,#110624,#0b021d);
    background-size: 400% 400%; animation: gradientBG 25s ease infinite;
}
@keyframes gradientBG { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

/* --- Header --- */
.practice-q-header { /* Remains the same */
    position: relative; z-index: 2; text-align: center;
    margin-bottom: 2.5rem; padding-top: 1rem;
}
.practice-q-header h1 { font-size: 2.2rem; font-weight: 600; color: #fff; margin-bottom: 0.5rem; display: inline-block; margin-left: 40px; margin-right: 40px; }
.difficulty-tag { display: inline-block; padding: 0.3rem 0.8rem; font-size: 0.9rem; font-weight: 600; border-radius: 15px; margin-left: 1rem; vertical-align: middle; color: #fff; border: 1px solid; }
.difficulty-tag.easy { background-color: rgba(42, 157, 143, 0.7); border-color: #3ccebd; }
.difficulty-tag.medium { background-color: rgba(231, 111, 81, 0.7); border-color: #f4a261; }
.difficulty-tag.hard { background-color: rgba(201, 24, 74, 0.7); border-color: #ff4d6d; }
.difficulty-tag.unknown { background-color: #555; border-color: #777;}
.practice-q-header h2 { font-size: 1.5rem; font-weight: 500; color: #c77dff; }
.back-button { position: absolute; top: 50%; transform: translateY(-50%); left: 10px; background: rgba(255, 255, 255, 0.1); color: #a0a0b0; border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 50%; padding: 0.5rem; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; line-height: 0; }
.back-button:hover:not(:disabled) { background: rgba(255, 255, 255, 0.2); color: #fff; }
.back-button:disabled { cursor: not-allowed; opacity: 0.5; }

/* --- Layout --- */
.practice-q-layout { /* Remains the same */
    position: relative; z-index: 2; display: grid;
    grid-template-columns: minmax(min(400px, 100%), 1fr) minmax(min(400px, 100%), 1fr);
    gap: 2rem; max-width: 1600px; margin: 0 auto;
}

/* --- Panels --- */
.question-description-panel, .code-execution-panel { /* Remains the same */
    background-color: rgba(11, 2, 29, 0.8); border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 16px; padding: 1.5rem 2rem; backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px); display: flex; flex-direction: column;
    overflow: hidden; min-height: calc(100vh - 12rem);
}
.question-description-panel { /* Remains the same */
    overflow-y: auto; scrollbar-width: thin; scrollbar-color: #4a3470 #1a0f30;
}
.question-description-panel::-webkit-scrollbar { width: 6px; }
.question-description-panel::-webkit-scrollbar-track { background: #1a0f30; border-radius: 3px;}
.question-description-panel::-webkit-scrollbar-thumb { background-color: #4a3470; border-radius: 3px; }
.question-description-panel::-webkit-scrollbar-thumb:hover { background-color: #7b2cbf; }
.question-description-panel h3, .code-execution-panel h3 { /* Remains the same */
    font-size: 1.3rem; color: #c77dff; margin: 0 0 1.5rem 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-bottom: 0.75rem; flex-shrink: 0;
}

/* --- Question Description Specific --- */
.description-text-container { /* Remains the same */
      overflow-y: auto; flex-grow: 1; margin-bottom: 1rem; padding-right: 10px;
      scrollbar-width: thin; scrollbar-color: #4a3470 #1a0f30;
}
.description-text-container::-webkit-scrollbar { width: 6px; }
.description-text-container::-webkit-scrollbar-track { background: #1a0f30; border-radius: 3px;}
.description-text-container::-webkit-scrollbar-thumb { background-color: #4a3470; border-radius: 3px; }
.description-text-container::-webkit-scrollbar-thumb:hover { background-color: #7b2cbf; }
.description-text { line-height: 1.7; color: #d0d0e0; white-space: pre-wrap; }
.examples-section, .constraints-section { margin-top: 1rem; padding-top: 1rem; border-top: 1px dashed rgba(255, 255, 255, 0.1); flex-shrink: 0; }
.examples-section h4, .constraints-section h4 { font-size: 1rem; color: #a0a0b0; margin-bottom: 0.75rem; font-weight: 600; }
.example-block { background-color: rgba(0, 0, 0, 0.2); border-radius: 6px; padding: 0.75rem 1rem; margin-bottom: 0.75rem; border-left: 3px solid #56CFE1; }
.example-block pre { white-space: pre-wrap; word-break: break-all; font-family: 'Courier New', Courier, monospace; font-size: 0.9rem; margin: 0.3rem 0; }
.constraints-section p { font-size: 0.95rem; color: #a0a0b0; line-height: 1.6; white-space: pre-wrap; }


/* --- Code Execution Panel Specific --- */
.language-display { /* Remains the same */
    margin-bottom: 1rem; font-size: 1rem; color: #a0a0b0; flex-shrink: 0;
}
.language-display strong { color: #e0e0e0; font-weight: 600; padding: 0.2rem 0.5rem; background-color: rgba(255, 255, 255, 0.1); border-radius: 4px; }

/* --- *** NEW/MODIFIED EDITOR STYLES *** --- */
.code-editor-wrapper {
    position: relative; /* Needed for potential overlays or line numbers */
    flex-grow: 1; /* Allow editor to take up space */
    margin-bottom: 1rem; /* Space below editor */
    overflow: auto; /* Add scrollbars IF content exceeds min-height */
    border-radius: 8px; /* Apply radius to wrapper */
    border: 1px solid rgba(255, 255, 255, 0.2); /* Apply border to wrapper */
    background-color: #0c031f; /* Match editor background */
    min-height: 250px; /* Ensure a minimum height */

    /* Custom Scrollbar for the editor wrapper */
    scrollbar-width: thin;
    scrollbar-color: #4a3470 #0c031f;
}
.code-editor-wrapper::-webkit-scrollbar { width: 8px; }
.code-editor-wrapper::-webkit-scrollbar-track { background: #0c031f; border-radius: 4px;}
.code-editor-wrapper::-webkit-scrollbar-thumb { background-color: #4a3470; border-radius: 4px; }
.code-editor-wrapper::-webkit-scrollbar-thumb:hover { background-color: #7b2cbf; }


/* Style the <pre> tag generated by react-simple-code-editor */
.code-editor-wrapper > pre.code-editor-pre {
    /* Reset margin/padding often added by browser defaults */
    margin: 0 !important;
    padding: 15px !important; /* Match padding prop in JSX */
    outline: none; /* Remove focus outline from pre */
    white-space: pre-wrap;   /* Allow wrapping long lines */
    word-wrap: break-word;   /* Break words if needed */
}

/* Style the underlying textarea (optional: hide it, make transparent) */
.code-editor-textarea-hidden {
    /* Make it transparent and positioned behind the highlighting */
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    margin: 0 !important;
    padding: 15px !important; /* Match padding prop in JSX */
    border: none !important;
    outline: none !important;
    background: none !important;
    color: transparent !important; /* Hide the actual text */
    caret-color: #e0e0e0; /* Make the caret visible */
    resize: none !important;
    overflow: hidden !important; /* Hide its own scrollbars */
    z-index: 1; /* Ensure it's clickable */
    font-family: inherit !important;
    font-size: inherit !important;
    line-height: inherit !important;
    tab-size: 4; /* Standard tab size */
    -moz-tab-size: 4;
}

/* Ensure PrismJS theme styles apply correctly */
.code-editor-wrapper code[class*="language-"],
.code-editor-wrapper pre[class*="language-"] {
    /* Override any conflicting default styles if necessary */
     background: none !important; /* Ensure no background from theme overrides wrapper */
     text-shadow: none !important; /* Example override */
     margin: 0 !important;
     padding: 0 !important;
}

/* --- END NEW/MODIFIED EDITOR STYLES --- */


/* Action Buttons Container */
.code-action-buttons { /* Remains the same */
    display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-shrink: 0;
}
/* Run & Submit Button Base */
.run-code-btn, .submit-code-btn { /* Remains the same */
    display: flex; align-items: center; justify-content: center; gap: 0.5rem;
    flex-grow: 1; padding: 12px 20px; font-size: 1rem; font-weight: 600;
    border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease;
}
.run-code-btn { background-color: #56CFE1; color: #0B021D; }
.submit-code-btn { background-color: #8AFF8A; color: #0B021D; }
.run-code-btn:hover:not(:disabled) { background-color: #7FFFeF; box-shadow: 0 4px 15px rgba(86, 207, 225, 0.4); transform: translateY(-2px); }
.submit-code-btn:hover:not(:disabled) { background-color: #AFFFAD; box-shadow: 0 4px 15px rgba(138, 255, 138, 0.4); transform: translateY(-2px); }
.run-code-btn:disabled, .submit-code-btn:disabled { background-color: #333 !important; color: #777 !important; cursor: not-allowed; transform: none !important; box-shadow: none !important; opacity: 0.7; }
.run-code-btn .spinner-icon, .submit-code-btn .spinner-icon { animation: spin 1s linear infinite; }
.animate-spin { animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* --- Output Section (Base for Judge0) --- */
.output-section { /* Remains the same */
    margin-top: 1rem; padding: 1.5rem; background-color: rgba(0, 0, 0, 0.3);
    border-radius: 8px; border: 1px solid rgba(255, 255, 255, 0.1);
    animation: fadeInResult 0.5s ease; flex-shrink: 0; overflow-x: auto;
    margin-bottom: 1rem; max-height: 40vh; overflow-y: auto;
    scrollbar-width: thin; scrollbar-color: #4a3470 #000;
}
@keyframes fadeInResult { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
.output-section::-webkit-scrollbar { width: 6px; }
.output-section::-webkit-scrollbar-track { background: #000; border-radius: 3px;}
.output-section::-webkit-scrollbar-thumb { background-color: #4a3470; border-radius: 3px; }
.output-section h3 { margin: 0 0 1rem 0; font-size: 1.1rem; color: #fff; border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-bottom: 0.5rem; display: flex; justify-content: space-between; align-items: center; }
.status-line { margin-bottom: 1rem; font-size: 0.9rem; color: #a0a0b0; }
.status-line strong { color: #c0c0d0; }
.status-badge { padding: 0.2rem 0.6rem; border-radius: 10px; font-weight: 600; font-size: 0.85rem; margin: 0 0.2rem; display: inline-block; vertical-align: middle; }
.output-section.status-accepted .status-badge { background-color: #2a9d8f; color: #fff; }
.output-section.status-wrong-answer .status-badge, .output-section.status-runtime-error-\(nzec\) .status-badge, .output-section.status-runtime-error .status-badge, .output-section.status-time-limit-exceeded .status-badge { background-color: #e76f51; color: #fff; }
.output-section.status-compilation-error .status-badge { background-color: #fca311; color: #000; }
.output-section.status-in-queue .status-badge, .output-section.status-processing .status-badge { background-color: #748ffc; color: #fff; }
.output-block { margin-bottom: 1rem; }
.output-block:last-child { margin-bottom: 0; }
.output-block h4 { font-size: 0.9rem; color: #a0a0b0; margin-bottom: 0.5rem; font-weight: 600; }
.output-block pre { background-color: rgba(0, 0, 0, 0.4); padding: 0.75rem 1rem; border-radius: 4px; font-family: 'Courier New', Courier, monospace; font-size: 0.9rem; white-space: pre-wrap; word-break: break-all; max-height: 150px; overflow-y: auto; border: 1px solid rgba(255, 255, 255, 0.1); scrollbar-width: thin; scrollbar-color: #4a3470 #000; }
.output-block pre::-webkit-scrollbar { width: 6px; }
.output-block pre::-webkit-scrollbar-track { background: #000; border-radius: 3px;}
.output-block pre::-webkit-scrollbar-thumb { background-color: #4a3470; border-radius: 3px; }
.compile-output pre, .stderr-output pre, .message-output pre { border-left: 3px solid #fca311; color: #ffd6a5; }
.stdout-output pre { border-left: 3px solid #8AFF8A; color: #e0e0e0; }

.output-placeholder { /* Remains the same */
    margin-top: 1.5rem; padding: 1.5rem; text-align: center; color: #7a6c90; font-style: italic;
    background-color: rgba(0, 0, 0, 0.2); border-radius: 6px; border: 1px dashed #4a3470;
}

/* --- AI Analysis Specific Styles (Now inside left panel) --- */
.ai-analysis-section { /* Remains the same */
    animation: fadeInResult 0.5s ease; border: none; background: none; padding: 0; margin: 0;
    flex-grow: 1; display: flex; flex-direction: column; overflow: hidden;
}
.ai-analysis-section h3 { margin: 0 0 1rem 0; font-size: 1.3rem; color: #fff; border-bottom: 1px solid #7b2cbf; padding-bottom: 0.75rem; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
.analysis-chart-container { position: relative; width: 100%; max-width: 450px; min-height: 300px; margin: 1.5rem auto; flex-shrink: 0; }
.analysis-status-badge { padding: 0.3rem 0.8rem; font-size: 0.9rem; border-radius: 12px; font-weight: 600; color: #fff; margin-left: 0.5rem; flex-shrink: 0; }
.analysis-status-badge.status-correct { background-color: #2a9d8f; }
.analysis-status-badge.status-incorrect { background-color: #e76f51; }
.analysis-status-badge.status-issue { background-color: #fca311; color: #000;}
.analysis-status-badge.status-unknown { background-color: #555; }
.analysis-block { margin-bottom: 1.2rem; }
.analysis-block:last-child { margin-bottom: 0; }
.analysis-block h4 { font-size: 1rem; color: #a0a0b0; margin-bottom: 0.5rem; font-weight: 600; border: none; padding: 0; }
.analysis-block p { font-size: 0.95rem; color: #d0d0e0; line-height: 1.6; white-space: pre-wrap; background-color: rgba(0, 0, 0, 0.2); padding: 0.75rem 1rem; border-radius: 4px; border-left: 3px solid #7b2cbf; word-break: break-word; }
.analysis-block.summary p { background-color: rgba(123, 44, 191, 0.1); font-style: italic; color: #e0e0e0; }


/* --- Loading / Error States for Page --- */
.loading-container-practice, .error-container-practice.questions-error { /* Remains the same */
    position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 1001;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    padding: 2rem; background-color: rgba(11, 2, 29, 0.9); backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px); color: #A0A0B0; text-align: center; animation: fadeInOverlay 0.3s ease;
}
@keyframes fadeInOverlay { from { opacity: 0; } to { opacity: 1; } }
.error-container-practice.questions-error .error-icon { color: #ff6b6b; margin-bottom: 1rem; }
.error-container-practice.questions-error h2 { color: #ff6b6b; margin-bottom: 0.5rem;}
.error-container-practice.questions-error .error-message { color: #fca5a5; margin-bottom: 1.5rem; line-height: 1.6;}
.practice-q-btn.secondary { padding: 10px 20px; font-size: 1rem; font-weight: 600; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; border: none; background-color: rgba(255, 255, 255, 0.1); color: #E0E0E0; border: 1px solid rgba(255, 255, 255, 0.2); display: inline-flex; align-items: center; gap: 0.5rem; }
.practice-q-btn.secondary:hover { background-color: rgba(255, 255, 255, 0.2); border-color: rgba(255, 255, 255, 0.3); }
.loading-container-practice .spinner { width: 50px; height: 50px; border: 5px solid rgba(255, 255, 255, 0.2); border-top-color: #9d4edd; border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 1.5rem; }


/* --- Responsive --- */
@media (max-width: 1200px) { /* Remains the same */
    .practice-q-layout { grid-template-columns: 1fr; }
    .question-description-panel { min-height: auto; max-height: 70vh; }
     .code-execution-panel { min-height: auto; overflow-y: auto; scrollbar-width: thin; scrollbar-color: #4a3470 #1a0f30; }
      .code-execution-panel::-webkit-scrollbar { width: 6px; }
      .code-execution-panel::-webkit-scrollbar-track { background: #1a0f30; border-radius: 3px;}
      .code-execution-panel::-webkit-scrollbar-thumb { background-color: #4a3470; border-radius: 3px; }
      .code-execution-panel::-webkit-scrollbar-thumb:hover { background-color: #7b2cbf; }
     /* Adjust editor height when stacked */
     .code-editor-wrapper { min-height: 300px; flex-grow: 0; }
}

@media (max-width: 600px) { /* Remains the same */
    .practice-questions-page { padding: 1.5rem 1rem 3rem 1rem; }
    .practice-q-header { margin-bottom: 1.5rem; }
    .practice-q-header h1 { font-size: 1.6rem; margin-left: 35px; margin-right: 35px; }
    .practice-q-header h2 { font-size: 1.2rem; }
    .difficulty-tag { font-size: 0.8rem; padding: 0.2rem 0.6rem; margin-left: 0.5rem;}
    .question-description-panel, .code-execution-panel { padding: 1rem 1.2rem; }
    .practice-q-layout { gap: 1.5rem; }
    .back-button { top: 8px; left: 8px; padding: 0.4rem;}
    .code-action-buttons { flex-direction: column; gap: 0.75rem;}
     .run-code-btn, .submit-code-btn { font-size: 0.95rem; padding: 12px 18px; }
     .output-block pre { font-size: 0.9rem;}
     .description-text-container { padding-right: 5px; }
     .analysis-chart-container { min-height: 250px; }
     /* Adjust editor font size for mobile */
     .code-editor-wrapper { font-size: 14px !important; } /* Use important if needed */
     .code-editor-wrapper > pre.code-editor-pre { padding: 10px !important; }
     .code-editor-textarea-hidden { padding: 10px !important; }

}
.summary-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

.summary-header h4 {
  margin-bottom: 0; /* Remove bottom margin from h4 */
}

.explain-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  background-color: rgba(255, 255, 255, 0.1);
  color: #c0c0d0;
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  padding: 0.3rem 0.6rem;
  font-size: 0.8rem;
  font-weight: 500;
  font-family: 'Inter', sans-serif;
  cursor: pointer;
  transition: all 0.3s ease;
  flex-shrink: 0; /* Prevent shrinking */
}

.explain-btn svg {
  color: #ffca3a; /* Yellow sparkle */
}

.explain-btn:hover {
  background-color: rgba(255, 255, 255, 0.2);
  color: #fff;
  border-color: #ffca3a;
}

/* --- NEW: Styles for Explanation Modal --- */
/* (Re-using .modal-overlay-practice from PracticePage.css) */
/* (Re-using .modal-content-practice from PracticePage.css) */

.modal-content-practice.explain-modal {
  max-width: 600px; /* Wider modal for text */
  text-align: left; /* Align text left */
  position: relative; /* For close button */
  padding: 2rem;
}

.modal-content-practice.explain-modal h2 {
  text-align: center;
  font-size: 1.5rem;
  color: #C77DFF;
  margin-bottom: 1.5rem;
}

/* (Re-using .modal-close-btn-history from PracticePage.css) */
.modal-close-btn-history {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: transparent;
  border: none;
  color: #7a6c90;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: all 0.3s ease;
  line-height: 0; /* Fix for icon alignment */
}
.modal-close-btn-history:hover {
  background-color: rgba(255, 255, 255, 0.1);
  color: #fff;
}

.explanation-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1rem;
  min-height: 150px;
  color: #a0a0b0;
  font-size: 1.1rem;
}

.explanation-content {
  min-height: 150px;
  max-height: 40vh; /* Limit height */
  overflow-y: auto;
  background-color: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  padding: 1rem 1.5rem;
  margin-bottom: 1.5rem;
  /* Custom scrollbar */
  scrollbar-width: thin;
  scrollbar-color: #4a3470 #1c0a3a;
}
.explanation-content::-webkit-scrollbar { width: 6px; }
.explanation-content::-webkit-scrollbar-track { background: #1c0a3a; border-radius: 3px;}
.explanation-content::-webkit-scrollbar-thumb { background-color: #4a3470; border-radius: 3px; }

.explanation-content p {
  color: #e0e0e0;
  font-size: 1.05rem;
  line-height: 1.7;
  white-space: pre-wrap; /* Respect newlines from the AI */
}

/* (Re-using .practice-q-btn.secondary from this file) */
.close-explain-modal {
  display: block;
  margin: 1rem auto 0 auto; /* Center the button */
  width: auto;
}